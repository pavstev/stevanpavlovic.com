---
import type { HTMLAttributes } from "astro/types";

import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "../../lib/cn";

const variants = cva("flex items-center justify-center rounded-xl transition-colors duration-200", {
  defaultVariants: {
    size: "md",
    variant: "default",
  },
  variants: {
    size: {
      lg: "size-12 rounded-xl",
      md: "size-10 rounded-xl",
      sm: "size-8 rounded-md",
      xl: "size-16 rounded-xl",
    },
    variant: {
      accent: "border border-accent/10 bg-accent/5 text-accent",
      default: "border border-border bg-muted/30 text-muted-foreground",
      dimmed: "border border-secondary/20 bg-secondary/10 text-secondary-foreground",
      filled: "border border-primary bg-primary text-primary-foreground",
      ghost: "border-transparent bg-transparent text-muted-foreground hover:text-foreground",
      glass: "border border-foreground/10 bg-foreground/5 text-foreground backdrop-blur-md",
      outline: "border border-border bg-transparent text-foreground",
    },
  },
});

interface Props extends HTMLAttributes<"div">, Omit<VariantProps<typeof variants>, "size"> {
  as?: string;
  size?: "lg" | "md" | "sm" | "xl" | number;
}

const { as: Tag = "div", class: className, size = "md", variant, ...props } = Astro.props;

const isNumericSize = typeof size === "number";
const numericStyle = isNumericSize ? { height: `${size}px`, width: `${size}px` } : {};
---

<Tag
  class:list={cn(variants({ className, size: isNumericSize ? null : (size as any), variant }))}
  style={numericStyle}
  {...props}
>
  <slot />
</Tag>
