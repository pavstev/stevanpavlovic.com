---
import type { HTMLAttributes } from 'astro/types';

import { cva, type VariantProps } from 'class-variance-authority';

const iconBox = cva('flex items-center justify-center rounded-[3px] transition-colors', {
  variants: {
    size: {
      md: 'size-10',
    },
    variant: {
      default: 'border border-border bg-muted/50 text-muted-foreground',
      dimmed: 'border border-border/50 bg-background/50 text-muted-foreground/80',
    },
  },
});

interface Props
  extends HTMLAttributes<'div'>, Omit<VariantProps<typeof iconBox>, 'size'> {
  as?: string;
  size?: 'md' | number;
}

const {
  as: Tag = 'div',
  class: className,
  size = 'md',
  variant = 'default',
  ...rest
} = Astro.props;

const sizeStyle =
  typeof size === 'number'
    ? `width: ${String(size)}px; height: ${String(size)}px;`
    : '';

const isCustomSize = typeof size === 'number';
---

<Tag
  class:list={iconBox({
    class: className,
    size: isCustomSize ? undefined : size,
    variant,
  })}
  style={sizeStyle}
  {...rest}
>
  <slot />
</Tag>
