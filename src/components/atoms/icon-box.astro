---
import type { HTMLAttributes } from "astro/types";

import { cva, type VariantProps } from "class-variance-authority";

import AppIcon from "./app-icon.astro";

const variants = cva("flex shrink-0 items-center justify-center transition-all duration-300", {
  defaultVariants: {
    size: "md",
    variant: "default",
  },
  variants: {
    size: {
      lg: "size-12 rounded-xl",
      md: "size-10 rounded-lg",
      sm: "size-8 rounded-md",
      xl: "size-16 rounded-2xl",
    },
    variant: {
      accent: "border-accent/20 bg-accent/10 text-accent hover:border-accent/40 hover:bg-accent/20",
      default: "border-border bg-muted/30 text-muted-foreground",
      glass: "glass text-foreground hover:bg-background/60",
      primary: "border-primary/20 bg-primary/10 text-primary hover:border-primary/40 hover:bg-primary/20",
    },
  },
});

interface Props extends HTMLAttributes<"div">, VariantProps<typeof variants> {
  as?: any;
  icon?: string;
  iconClass?: string;
  iconSize?: any;
}

const { as: Tag = "div", class: className, icon, iconClass, iconSize, size, variant, ...props } = Astro.props;
---

<Tag class:list={[variants({ size, variant }), className]} {...props}>
  {
    icon ? (
      <AppIcon
        class:list={iconClass}
        name={icon}
        size={iconSize || (size === "xl" ? "lg" : size === "sm" ? "sm" : "md")}
      />
    ) : (
      <slot />
    )
  }
</Tag>
