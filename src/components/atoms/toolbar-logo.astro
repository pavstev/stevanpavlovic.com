---
import type { ImageMetadata } from "astro";

import { Image } from "astro:assets";
import { cva, type VariantProps } from "class-variance-authority";

const variants = cva("shrink-0 overflow-hidden leading-none transition-all duration-300", {
  defaultVariants: {
    size: "md",
    type: "organization",
  },
  variants: {
    size: {
      lg: "size-12",
      md: "size-10",
      sm: "size-8",
    },
    type: {
      organization:
        "flex items-center justify-center rounded-lg border border-border/60 bg-background/50 p-1.5 shadow-sm ring-1 ring-border/5",
      person: "rounded-full border border-border/80 shadow-sm ring-2 ring-background",
    },
  },
});

interface Props extends VariantProps<typeof variants> {
  alt: string;
  src: ImageMetadata;
}

const { alt, size, src, type } = Astro.props;
---

<div class:list={[variants({ size, type })]}>
  <Image
    alt={alt}
    class:list={[
      "size-full transition-opacity duration-300",
      {
        "object-contain opacity-90 group-hover/toolbar:opacity-100": type === "organization" || !type,
        "object-cover": type === "person",
      },
    ]}
    src={src}
  />
</div>
