---
import Container from "../atoms/Container.astro";
import LayoutRoot from "../layout/layout-root.astro";
import VerticalGuideLine from "../molecules/vertical-guide-line.astro";
import "../../styles/tables.css";

interface Props {
  description?: string;
  slug: string;
  title: string;
}

const { description, slug, title } = Astro.props;
---

<LayoutRoot description={description} slug={slug} title={title}>
  <Container as="article" data-pagefind-body>
    <div class="mx-auto">
      <header class="mb-4">
        <slot name="header" />
      </header>

      <slot name="hero-image" />

      <div class="relative">
        <VerticalGuideLine />

        <div
          class="prose prose-base max-w-none prose-invert
        prose-headings:scroll-mt-20 prose-headings:font-bold prose-headings:tracking-tight prose-headings:text-foreground
        prose-h2:mt-8 prose-h2:border-b prose-h2:border-border/40 prose-h2:pb-3 prose-h2:text-3xl
        prose-p:leading-7 prose-p:text-muted-foreground/90
        prose-a:font-semibold prose-a:text-primary prose-a:no-underline prose-a:transition-all hover:prose-a:text-primary hover:prose-a:underline hover:prose-a:underline-offset-4
        prose-strong:font-bold prose-strong:text-foreground
        prose-code:rounded-lg prose-code:border prose-code:border-border prose-code:bg-muted/40 prose-code:px-2 prose-code:py-0.5 prose-code:font-mono prose-code:text-sm prose-code:font-medium prose-code:text-foreground before:prose-code:content-none after:prose-code:content-none
        prose-pre:rounded-2xl prose-pre:border prose-pre:border-border/60 prose-pre:bg-background/40 prose-pre:shadow-2xl prose-pre:backdrop-blur-sm
        prose-li:my-1 prose-li:text-muted-foreground/90 prose-li:marker:text-primary/50
        prose-img:rounded-3xl prose-img:border prose-img:border-border/40 prose-img:shadow-2xl"
        >
          <slot />
        </div>
      </div>

      <slot name="footer" />
    </div>
  </Container>
</LayoutRoot>

<script>
  import { setupTableSorting } from "../../lib/table-sorting";
  setupTableSorting();
  document.addEventListener("astro:page-load", setupTableSorting);
</script>
