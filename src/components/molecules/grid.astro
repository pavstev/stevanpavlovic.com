---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'div'> {
  as?: string;
  cols?: {
    base?: 1 | 2 | 3 | 4;
    lg?: 1 | 2 | 3 | 4;
    md?: 1 | 2 | 3 | 4;
    sm?: 1 | 2 | 3 | 4;
  };
  gap?: 2 | 4 | 6 | 8 | 10;
}

const {
  as: Tag = 'div',
  class: className,
  cols = { base: 1 },
  gap = 6,
  ...props
} = Astro.props;

// Helper to generate responsive classes
const getColClass = (breakpoint: string, value?: number) => {
  if (!value) return '';
  const prefix = breakpoint === 'base' ? '' : `${breakpoint}:`;
  return `${prefix}grid-cols-${value}`;
};

const colClasses = [
  getColClass('base', cols.base),
  getColClass('sm', cols.sm),
  getColClass('md', cols.md),
  getColClass('lg', cols.lg),
].filter(Boolean).join(' ');

const gapClass = `gap-${gap}`;
---

<Tag class:list={['grid w-full', colClasses, gapClass, className]} {...props}>
  <slot />
</Tag>
