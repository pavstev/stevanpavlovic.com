---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'div'> {
  class?: string;
  columns?: number;
}

const { class: className, columns = 2, ...rest } = Astro.props;
---

<div
  class:list={[
    'w-full masonry-grid [column-count:1] md:[column-count:var(--masonry-cols)]',
    className,
  ]}
  style={{ '--masonry-cols': columns }}
  {...rest}
>
  <slot />
</div>

<style is:global>
  /* Horizontal gap between columns */
  .masonry-grid {
    column-gap: 1.5rem;
  }

  /* Vertical spacing between items and prevent breaking */
  .masonry-item {
    break-inside: avoid;
    margin-bottom: 1.5rem;
  }

  /* Remove bottom margin from last item in each column */
  .masonry-item:last-child {
    margin-bottom: 0;
  }
</style>
