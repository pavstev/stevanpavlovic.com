---
import type { HTMLAttributes } from 'astro/types';

import { Icon } from 'astro-icon/components';

import { cn } from '../../lib/cn';

interface Props extends HTMLAttributes<'button'> {
  size?: 'lg' | 'md' | 'sm';
}

const {
  class: className,
  size = 'md',
  ...props
} = Astro.props;

const sizeClasses = {
  lg: 'size-10',
  md: 'size-9',
  sm: 'size-8',
};
---

<button
  aria-label="Toggle menu"
  class:list={cn(
    // Base styles
    'group/toggle relative flex items-center justify-center rounded-full',
    'bg-muted/50 text-muted-foreground',
    'border border-border/50',
    'transition-all duration-200 ease-out',
    'hover:bg-muted hover:text-foreground',
    'focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background focus-visible:outline-none',
    // Hidden on desktop
    'md:hidden',
    // Size
    sizeClasses[size],
    className
  )}
  {...props}
>
  <Icon
    class:list={cn(
      'transition-all duration-200 ease-out',
      'group-[.open]/toggle:rotate-90 group-[.open]/toggle:opacity-0',
      'group-hover/toggle:scale-105'
    )}
    name="mdi:menu"
    size={20}
  />
  <Icon
    class:list={cn(
      'absolute transition-all duration-200 ease-out',
      'rotate-90 opacity-0',
      'group-[.open]/toggle:rotate-0 group-[.open]/toggle:opacity-100'
    )}
    name="mdi:close"
    size={20}
  />
</button>
