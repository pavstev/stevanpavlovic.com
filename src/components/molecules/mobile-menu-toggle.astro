---
import type { HTMLAttributes } from "astro/types";

import AppIcon from "../atoms/app-icon.astro";
import Button from "../atoms/button.astro";

interface Props extends HTMLAttributes<"button"> {
  size?: "lg" | "md" | "sm";
}

const { class: className, size = "md", ...props } = Astro.props;

const sizeClasses = {
  lg: "size-10",
  md: "size-9",
  sm: "size-8",
};
---

<Button
  aria-label="Toggle menu"
  class:list={[
    "group/toggle relative text-muted-foreground transition-colors",
    "hover:bg-foreground/5 hover:text-foreground",
    // Hidden on desktop
    "md:hidden",
    // Size
    sizeClasses[size],
    className,
  ]}
  id="mobile-menu-toggle"
  size="icon"
  variant="ghost"
  {...props}
>
  <AppIcon
    class="transition-all duration-300 group-[.open]/toggle:rotate-90 group-[.open]/toggle:opacity-0"
    name="mdi:menu"
    size="lg"
  />
  <AppIcon
    class="absolute rotate-90 opacity-0 transition-all duration-300 group-[.open]/toggle:rotate-0 group-[.open]/toggle:opacity-100"
    name="mdi:close"
    size="lg"
  />
</Button>
