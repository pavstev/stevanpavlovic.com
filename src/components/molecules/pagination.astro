---
import { Icon } from 'astro-icon/components';

import Button from '../atoms/button.astro';
import Stack from '../atoms/stack.astro';
import Text from '../atoms/text.astro';

interface Props {
  baseUrl: string;
  currentPage: number;
  totalPages: number;
}

const { baseUrl, currentPage, totalPages } = Astro.props;

function getPageUrl(page: number): string {
  if (page === 1) return baseUrl;
  return `${baseUrl}${baseUrl.includes('?') ? '&' : '?'}page=${page}`;
}
---

<nav aria-label="Pagination">
  <Stack align="center" direction="row" gap={2} justify="end">
    <Button
      as="a"
      disabled={currentPage === 1}
      href={currentPage > 1 ? getPageUrl(currentPage - 1) : undefined}
      size="sm"
      variant="ghost"
    >
      <Icon class="size-4" name="mdi:chevron-left" />
      <span class="hidden sm:inline">Previous</span>
    </Button>

    <Text size="sm" variant="muted">
      <span class="sm:hidden">{currentPage}/{totalPages}</span>
      <span class="hidden sm:inline">{currentPage} / {totalPages}</span>
    </Text>

    <Button
      as="a"
      disabled={currentPage === totalPages}
      href={currentPage < totalPages ? getPageUrl(currentPage + 1) : undefined}
      size="sm"
      variant="ghost"
    >
      <span class="hidden sm:inline">Next</span>
      <Icon class="size-4" name="mdi:chevron-right" />
    </Button>
  </Stack>
</nav>
