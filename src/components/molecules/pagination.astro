---
import { getPaginationLinks, type PaginationType } from "../../lib/list";
import AppIcon from "../atoms/app-icon.astro";
import Button from "../atoms/button.astro";

interface Props {
  baseUrl: string;
  currentPage: number;
  /** Optional: Function to generate page URL. Falls back to default logic if not provided. */
  // eslint-disable-next-line no-unused-vars
  getPageUrl?: (_page: number) => string;
  /** Optional: Direct URL for next page (overrides auto-generation) */
  nextUrl?: string;
  paginationType?: PaginationType;
  /** Optional: Direct URL for previous page (overrides auto-generation) */
  prevUrl?: string;
  totalPages: number;
}

const {
  baseUrl,
  currentPage,
  getPageUrl: customGetPageUrl,
  nextUrl,
  paginationType = "path",
  prevUrl,
  totalPages,
} = Astro.props as Props;

const { nextLink, prevLink } = getPaginationLinks({
  baseUrl,
  currentPage,
  currentUrl: Astro.url,
  customGetPageUrl,
  nextUrl,
  paginationType,
  prevUrl,
  totalPages,
});
---

{
  totalPages > 1 && (
    <nav aria-label="Pagination" class="pagination">
      <div class="glass flex items-center justify-center gap-2 rounded-2xl p-2 shadow-2xl">
        <Button
          class="size-9 p-0 text-muted-foreground transition-all hover:text-foreground"
          disabled={!prevLink}
          href={prevLink}
          size="icon"
          variant="ghost"
        >
          <AppIcon name="mdi:chevron-left" size="lg" />
          <span class="sr-only">Previous page</span>
        </Button>

        <div class="flex items-center px-3 font-mono text-[12px] font-bold tracking-wider uppercase">
          <span class="text-primary tabular-nums">{currentPage}</span>
          <span class="mx-2 text-muted-foreground/30">/</span>
          <span class="text-muted-foreground tabular-nums">{totalPages}</span>
        </div>

        <Button
          class="size-9 p-0 text-muted-foreground transition-all hover:text-foreground"
          disabled={!nextLink}
          href={nextLink}
          size="icon"
          variant="ghost"
        >
          <AppIcon name="mdi:chevron-right" size="lg" />
          <span class="sr-only">Next page</span>
        </Button>
      </div>
    </nav>
  )
}
