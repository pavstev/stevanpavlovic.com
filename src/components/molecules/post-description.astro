---
import ToolbarItemComponent from "../atoms/toolbar-item.astro";

interface Props {
  description: string | undefined;
  maxLength?: number;
}

const { description, maxLength = 240 } = Astro.props;

const shouldTruncate = description && description.length > maxLength;
const truncatedText = shouldTruncate ? description.slice(0, maxLength).trim() + "..." : description;
---

{
  description && (
    <ToolbarItemComponent label="Description">
      <div class="max-w-2xl">
        {shouldTruncate ? (
          <details class="group/desc">
            <summary class="cursor-pointer list-none">
              <span class="text-sm leading-relaxed text-muted-foreground group-open/desc:hidden">{truncatedText}</span>
              <span class="hidden text-sm leading-relaxed text-muted-foreground group-open/desc:inline">
                {description}
              </span>
              <span class="ml-2 text-xs font-medium text-primary hover:underline">
                <span class="group-open/desc:hidden">Read more</span>
                <span class="hidden group-open/desc:inline">Show less</span>
              </span>
            </summary>
          </details>
        ) : (
          <p class="text-sm leading-relaxed text-muted-foreground">{description}</p>
        )}
      </div>
    </ToolbarItemComponent>
  )
}
