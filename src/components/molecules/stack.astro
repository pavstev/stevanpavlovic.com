---
import type { HTMLAttributes } from 'astro/types';

import { cva, type VariantProps } from 'class-variance-authority';

/**
 * Stack Component
 * A versatile flexbox container for vertical and horizontal layouts.
 */

const stack = cva('flex');

interface Props
  extends
    HTMLAttributes<'div'>,
    Omit<
      VariantProps<typeof stack>,
      'align' | 'direction' | 'gap' | 'justify'
    > {
  align?: ResponsiveValue<'baseline' | 'center' | 'end' | 'start' | 'stretch'>;
  as?: string;
  direction?: ResponsiveValue<'col' | 'col-reverse' | 'row' | 'row-reverse'>;
  gap?: ResponsiveValue<number | string>;
  justify?: ResponsiveValue<
    'around' | 'between' | 'center' | 'end' | 'evenly' | 'start'
  >;
}

import { buildResponsiveClasses, type ResponsiveValue } from '../../lib/styles';

const {
  align,
  as: Tag = 'div',
  class: className,
  direction = 'col',
  gap = 4,
  justify,
  ...rest
} = Astro.props;

const directionClass = buildResponsiveClasses(direction, 'flex');
const gapClass = buildResponsiveClasses(gap, 'gap');
const alignClass = buildResponsiveClasses(align, 'items');
const justifyClass = buildResponsiveClasses(justify, 'justify');
---

<Tag
  class:list={stack({
    class: [directionClass, alignClass, justifyClass, gapClass, className],
  })}
  {...rest}
>
  <slot />
</Tag>
