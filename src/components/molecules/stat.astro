---
import { Icon } from 'astro-icon/components';

import { formatCompactNumber } from '../../lib/content';
import { NumberTicker } from '../atoms/number-ticker';
import Text from '../atoms/text.astro';

interface Props {
  class?: string;
  format?: "compact" | "plain";
  icon: string;
  label: string;
  unit?: string;
  value: number;
}

const { class: className, format = "plain", icon, label, unit, value } = Astro.props;

const displayValue = format === "compact" ? formatCompactNumber(value) : value;
---

<div class:list={["group flex items-center gap-3", className]}>
  {/* Icon Container */}
  <div class="group-hover:shadow-glow-primary flex size-10 items-center justify-center rounded-lg bg-primary/10 text-primary ring-1 ring-primary/20 backdrop-blur-md transition-all duration-300 group-hover:scale-110 group-hover:bg-primary/20">
    <Icon class="size-5 md:size-6" name={icon} />
  </div>

  {/* Text Content */}
  <div class="flex flex-col text-left">
    <Text class="text-xl leading-none font-bold text-foreground md:text-2xl" variant="default">
      {unit && <span class="tabular-nums">{unit}</span>}
      {format === "compact" ? (
        <span class="tabular-nums">{displayValue}</span>
      ) : (
        <NumberTicker client:visible value={value} />
      )}
    </Text>
    <Text class="mt-1 text-[10px] font-bold tracking-widest text-muted-foreground uppercase" variant="default">
      {label}
    </Text>
  </div>
</div>
