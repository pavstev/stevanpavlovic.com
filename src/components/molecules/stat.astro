---
import { Icon } from "astro-icon/components";

import { formatCompactNumber } from "../../lib/content";
import NumberTicker from "../atoms/number-ticker.astro";
import Text from "../atoms/text.astro";

interface Props {
  class?: string;
  format?: "compact" | "plain";
  icon: string;
  label: string;
  unit?: string;
  value: number;
}

const { class: className, format = "plain", icon, label, unit, value } = Astro.props;

const displayValue = format === "compact" ? formatCompactNumber(value) : value;
---

<div class:list={["group flex items-center gap-4", className]}>
  {/* Icon Container */}
  <div
    class="relative flex size-12 items-center justify-center rounded-xl bg-foreground/5 text-accent/80 ring-1 ring-foreground/10 transition-all duration-300 group-hover:bg-primary/20 group-hover:text-accent group-hover:ring-primary/50"
  >
    <Icon class="size-6 transition-transform duration-300 group-hover:scale-110 md:size-7" name={icon} />
  </div>

  {/* Text Content */}
  <div class="flex flex-col text-left">
    <div class="flex items-baseline gap-0.5">
      <span class="text-gradient-accent text-3xl font-bold tracking-tight tabular-nums md:text-4xl">
        {format === "compact" ? displayValue : <NumberTicker value={value} />}
      </span>
      {unit && <span class="text-2xl font-bold text-primary md:text-3xl">{unit}</span>}
    </div>
    <Text
      class="text-xs font-medium tracking-wide text-muted-foreground uppercase transition-colors duration-300 group-hover:text-accent/80"
      variant="default"
    >
      {label}
    </Text>
  </div>
</div>
