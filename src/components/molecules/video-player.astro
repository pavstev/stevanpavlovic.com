---
import type { HTMLAttributes } from "astro/types";
import { cn } from "../../lib/cn";
import Icon from "../atoms/icon.astro";

interface Props extends HTMLAttributes<"div"> {
  poster?: string;
  src: string;
}

const { class: className, poster, src, ...props } = Astro.props;
---

<div
  class={cn(
    "group relative aspect-video w-full overflow-hidden rounded-2xl border border-white/10 bg-black/40 shadow-2xl transition-all duration-500 hover:border-white/20",
    className,
  )}
  {...props}
>
  {
    poster && (
      <img
        alt="Video poster"
        class="size-full object-cover transition-transform duration-700 group-hover:scale-105"
        src={poster}
      />
    )
  }

  <div class="absolute inset-0 flex items-center justify-center bg-black/20 transition-colors group-hover:bg-black/10">
    <div
      class="flex size-16 items-center justify-center rounded-full border border-white/20 bg-white/10 text-white backdrop-blur-xl transition-all duration-300 group-hover:scale-110 group-hover:bg-primary group-hover:border-primary/50"
    >
      <Icon class="translate-x-0.5" name="mdi:play" size="xl" />
    </div>
  </div>

  <div
    class="absolute right-0 bottom-0 left-0 bg-linear-to-t from-black/80 to-transparent p-4 opacity-0 transition-opacity duration-300 group-hover:opacity-100"
  >
    <div class="h-1 w-full rounded-full bg-white/20 overflow-hidden">
      <div class="h-full w-1/3 bg-primary shadow-[0_0_10px_rgba(var(--color-primary-rgb),0.5)]"></div>
    </div>
  </div>
</div>
