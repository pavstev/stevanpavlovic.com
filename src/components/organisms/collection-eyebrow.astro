---
import type { CollectionItem, CollectionName } from "../../lib/collection-pages";

import FormattedDate from "../atoms/formatted-date.astro";
import Stack from "../atoms/stack.astro";
import Text from "../atoms/text.astro";

/**
 * Collection Eyebrow Component
 *
 * A unified eyebrow component that handles all collection types (blog, projects, experience)
 * with smart conditional rendering based on the collection type and data available.
 *
 * @param collection - The collection name (blog, projects, experience)
 * @param data - The collection entry data
 */
interface Props {
  collection: "blog" | "experience" | "projects";
  item: CollectionItem<CollectionName>;
}

const {
  collection,
  item: { data },
} = Astro.props as Props;
---

{
  collection === "blog" && "pubDate" in data && data.pubDate ? (
    <Stack align="center" class="font-mono text-xs tracking-wider uppercase" direction="row" gap={3}>
      <FormattedDate date={data.pubDate} full />
    </Stack>
  ) : collection === "projects" && "subtitle" in data && data.subtitle ? (
    <Stack align="center" class="font-mono text-xs tracking-wider uppercase" direction="row" gap={3}>
      <Text variant="primary">{data.subtitle}</Text>
    </Stack>
  ) : collection === "experience" && "company" in data ? (
    <Stack align="center" class="font-mono text-xs tracking-wider uppercase" direction="row" gap={3}>
      <Text variant="primary">{data.company}</Text>
      {"location" in data && data.location && <Text variant="muted">{data.location}</Text>}
    </Stack>
  ) : undefined
}
