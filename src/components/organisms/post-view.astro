---
import type { CollectionEntry } from "astro:content";

import { type CollectionItem, type CollectionName, getViewPageProps } from "../../lib/collection-pages";
import BackButton from "../atoms/back-button.astro";
import LayoutContent from "../layout/layout-content.astro";
import CollectionActions from "./collection-actions.astro";
import CollectionEyebrow from "./collection-eyebrow.astro";
import CollectionHeader from "./collection-header.astro";
import CollectionHeroImage from "./collection-hero-image.astro";
import CollectionTags from "./collection-tags.astro";

interface Props {
  backLink?: string;
  collection: CollectionName;
  entry: CollectionEntry<CollectionName>;
}

const {
  collection,
  entry: { data, id },
} = Astro.props;

const item: CollectionItem<CollectionName> = {
  collection,
  data,
  id,
};

const { description, title } = getViewPageProps(item);
---

<LayoutContent description={description} title={title}>
  <BackButton collection={collection} />

  <CollectionHeader description={description} level={1} title={title} />

  <CollectionEyebrow collection={collection} item={item} />

  <CollectionActions collection={collection} item={item} />

  <CollectionHeroImage collection={collection} data={data} title={title} />

  <CollectionTags collection={collection} data={data} />

  <slot />
</LayoutContent>
